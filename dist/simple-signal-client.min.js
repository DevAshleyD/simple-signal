(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.SimpleSignalClient=e()}})(function(){var e,t,r;return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var f=typeof require=="function"&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}var o=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){(function(r){"use strict";function n(e,t){if(e===t){return 0}var r=e.length;var n=t.length;for(var i=0,o=Math.min(r,n);i<o;++i){if(e[i]!==t[i]){r=e[i];n=t[i];break}}if(r<n){return-1}if(n<r){return 1}return 0}function i(e){if(r.Buffer&&typeof r.Buffer.isBuffer==="function"){return r.Buffer.isBuffer(e)}return!!(e!=null&&e._isBuffer)}var o=e("util/");var s=Object.prototype.hasOwnProperty;var a=Array.prototype.slice;var f=function(){return function e(){}.name==="foo"}();function u(e){return Object.prototype.toString.call(e)}function c(e){if(i(e)){return false}if(typeof r.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(e)}if(!e){return false}if(e instanceof DataView){return true}if(e.buffer&&e.buffer instanceof ArrayBuffer){return true}return false}var l=t.exports=m;var h=/\s*function\s+([^\(\s]*)\s*/;function d(e){if(!o.isFunction(e)){return}if(f){return e.name}var t=e.toString();var r=t.match(h);return r&&r[1]}l.AssertionError=function e(t){this.name="AssertionError";this.actual=t.actual;this.expected=t.expected;this.operator=t.operator;if(t.message){this.message=t.message;this.generatedMessage=false}else{this.message=v(this);this.generatedMessage=true}var r=t.stackStartFunction||y;if(Error.captureStackTrace){Error.captureStackTrace(this,r)}else{var n=new Error;if(n.stack){var i=n.stack;var o=d(r);var s=i.indexOf("\n"+o);if(s>=0){var a=i.indexOf("\n",s+1);i=i.substring(a+1)}this.stack=i}}};o.inherits(l.AssertionError,Error);function p(e,t){if(typeof e==="string"){return e.length<t?e:e.slice(0,t)}else{return e}}function g(e){if(f||!o.isFunction(e)){return o.inspect(e)}var t=d(e);var r=t?": "+t:"";return"[Function"+r+"]"}function v(e){return p(g(e.actual),128)+" "+e.operator+" "+p(g(e.expected),128)}function y(e,t,r,n,i){throw new l.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}l.fail=y;function m(e,t){if(!e)y(e,true,t,"==",l.ok)}l.ok=m;l.equal=function e(t,r,n){if(t!=r)y(t,r,n,"==",l.equal)};l.notEqual=function e(t,r,n){if(t==r){y(t,r,n,"!=",l.notEqual)}};l.deepEqual=function e(t,r,n){if(!b(t,r,false)){y(t,r,n,"deepEqual",l.deepEqual)}};l.deepStrictEqual=function e(t,r,n){if(!b(t,r,true)){y(t,r,n,"deepStrictEqual",l.deepStrictEqual)}};function b(e,t,r,s){if(e===t){return true}else if(i(e)&&i(t)){return n(e,t)===0}else if(o.isDate(e)&&o.isDate(t)){return e.getTime()===t.getTime()}else if(o.isRegExp(e)&&o.isRegExp(t)){return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase}else if((e===null||typeof e!=="object")&&(t===null||typeof t!=="object")){return r?e===t:e==t}else if(c(e)&&c(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array)){return n(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}else if(i(e)!==i(t)){return false}else{s=s||{actual:[],expected:[]};var a=s.actual.indexOf(e);if(a!==-1){if(a===s.expected.indexOf(t)){return true}}s.actual.push(e);s.expected.push(t);return _(e,t,r,s)}}function w(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function _(e,t,r,n){if(e===null||e===undefined||t===null||t===undefined)return false;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return false;var i=w(e);var s=w(t);if(i&&!s||!i&&s)return false;if(i){e=a.call(e);t=a.call(t);return b(e,t,r)}var f=A(e);var u=A(t);var c,l;if(f.length!==u.length)return false;f.sort();u.sort();for(l=f.length-1;l>=0;l--){if(f[l]!==u[l])return false}for(l=f.length-1;l>=0;l--){c=f[l];if(!b(e[c],t[c],r,n))return false}return true}l.notDeepEqual=function e(t,r,n){if(b(t,r,false)){y(t,r,n,"notDeepEqual",l.notDeepEqual)}};l.notDeepStrictEqual=E;function E(e,t,r){if(b(e,t,true)){y(e,t,r,"notDeepStrictEqual",E)}}l.strictEqual=function e(t,r,n){if(t!==r){y(t,r,n,"===",l.strictEqual)}};l.notStrictEqual=function e(t,r,n){if(t===r){y(t,r,n,"!==",l.notStrictEqual)}};function S(e,t){if(!e||!t){return false}if(Object.prototype.toString.call(t)=="[object RegExp]"){return t.test(e)}try{if(e instanceof t){return true}}catch(e){}if(Error.isPrototypeOf(t)){return false}return t.call({},e)===true}function k(e){var t;try{e()}catch(e){t=e}return t}function x(e,t,r,n){var i;if(typeof t!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof r==="string"){n=r;r=null}i=k(t);n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:".");if(e&&!i){y(i,r,"Missing expected exception"+n)}var s=typeof n==="string";var a=!e&&o.isError(i);var f=!e&&i&&!r;if(a&&s&&S(i,r)||f){y(i,r,"Got unwanted exception"+n)}if(e&&i&&r&&!S(i,r)||!e&&i){throw i}}l.throws=function(e,t,r){x(true,e,t,r)};l.doesNotThrow=function(e,t,r){x(false,e,t,r)};l.ifError=function(e){if(e)throw e};var A=Object.keys||function(e){var t=[];for(var r in e){if(s.call(e,r))t.push(r)}return t}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"util/":10}],2:[function(e,t,r){"use strict";r.byteLength=c;r.toByteArray=l;r.fromByteArray=p;var n=[];var i=[];var o=typeof Uint8Array!=="undefined"?Uint8Array:Array;var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var a=0,f=s.length;a<f;++a){n[a]=s[a];i[s.charCodeAt(a)]=a}i["-".charCodeAt(0)]=62;i["_".charCodeAt(0)]=63;function u(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}return e[t-2]==="="?2:e[t-1]==="="?1:0}function c(e){return e.length*3/4-u(e)}function l(e){var t,r,n,s,a,f;var c=e.length;a=u(e);f=new o(c*3/4-a);n=a>0?c-4:c;var l=0;for(t=0,r=0;t<n;t+=4,r+=3){s=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)];f[l++]=s>>16&255;f[l++]=s>>8&255;f[l++]=s&255}if(a===2){s=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4;f[l++]=s&255}else if(a===1){s=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2;f[l++]=s>>8&255;f[l++]=s&255}return f}function h(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63]}function d(e,t,r){var n;var i=[];for(var o=t;o<r;o+=3){n=(e[o]<<16)+(e[o+1]<<8)+e[o+2];i.push(h(n))}return i.join("")}function p(e){var t;var r=e.length;var i=r%3;var o="";var s=[];var a=16383;for(var f=0,u=r-i;f<u;f+=a){s.push(d(e,f,f+a>u?u:f+a))}if(i===1){t=e[r-1];o+=n[t>>2];o+=n[t<<4&63];o+="=="}else if(i===2){t=(e[r-2]<<8)+e[r-1];o+=n[t>>10];o+=n[t>>4&63];o+=n[t<<2&63];o+="="}s.push(o);return s.join("")}},{}],3:[function(e,t,r){},{}],4:[function(e,t,r){"use strict";var n=e("base64-js");var i=e("ieee754");r.Buffer=f;r.SlowBuffer=m;r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o;f.TYPED_ARRAY_SUPPORT=s();if(!f.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function s(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}function a(e){if(e>o){throw new RangeError("Invalid typed array length")}var t=new Uint8Array(e);t.__proto__=f.prototype;return t}function f(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return h(e)}return u(e,t,r)}if(typeof Symbol!=="undefined"&&Symbol.species&&f[Symbol.species]===f){Object.defineProperty(f,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}f.poolSize=8192;function u(e,t,r){if(typeof e==="number"){throw new TypeError('"value" argument must not be a number')}if(e instanceof ArrayBuffer){return g(e,t,r)}if(typeof e==="string"){return d(e,t)}return v(e)}f.from=function(e,t,r){return u(e,t,r)};f.prototype.__proto__=Uint8Array.prototype;f.__proto__=Uint8Array;function c(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be a number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function l(e,t,r){c(e);if(e<=0){return a(e)}if(t!==undefined){return typeof r==="string"?a(e).fill(t,r):a(e).fill(t)}return a(e)}f.alloc=function(e,t,r){return l(e,t,r)};function h(e){c(e);return a(e<0?0:y(e)|0)}f.allocUnsafe=function(e){return h(e)};f.allocUnsafeSlow=function(e){return h(e)};function d(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!f.isEncoding(t)){throw new TypeError('"encoding" must be a valid string encoding')}var r=b(e,t)|0;var n=a(r);var i=n.write(e,t);if(i!==r){n=n.slice(0,i)}return n}function p(e){var t=e.length<0?0:y(e.length)|0;var r=a(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255}return r}function g(e,t,r){if(t<0||e.byteLength<t){throw new RangeError("'offset' is out of bounds")}if(e.byteLength<t+(r||0)){throw new RangeError("'length' is out of bounds")}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}n.__proto__=f.prototype;return n}function v(e){if(f.isBuffer(e)){var t=y(e.length)|0;var r=a(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e){if(ArrayBuffer.isView(e)||"length"in e){if(typeof e.length!=="number"||K(e.length)){return a(0)}return p(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return p(e.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=o){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+o.toString(16)+" bytes")}return e|0}function m(e){if(+e!=e){e=0}return f.alloc(+e)}f.isBuffer=function e(t){return t!=null&&t._isBuffer===true};f.compare=function e(t,r){if(!f.isBuffer(t)||!f.isBuffer(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var i=r.length;for(var o=0,s=Math.min(n,i);o<s;++o){if(t[o]!==r[o]){n=t[o];i=r[o];break}}if(n<i)return-1;if(i<n)return 1;return 0};f.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};f.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return f.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var i=f.allocUnsafe(r);var o=0;for(n=0;n<t.length;++n){var s=t[n];if(!f.isBuffer(s)){throw new TypeError('"list" argument must be an Array of Buffers')}s.copy(i,o);o+=s.length}return i};function b(e,t){if(f.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return $(e).length;t=(""+t).toLowerCase();n=true}}}f.byteLength=b;function w(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return q(this,t,r);case"utf8":case"utf-8":return B(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return L(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}f.prototype._isBuffer=true;function _(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}f.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){_(this,r,r+1)}return this};f.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){_(this,r,r+3);_(this,r+1,r+2)}return this};f.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){_(this,r,r+7);_(this,r+1,r+6);_(this,r+2,r+5);_(this,r+3,r+4)}return this};f.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return B(this,0,t);return w.apply(this,arguments)};f.prototype.equals=function e(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return f.compare(this,t)===0};f.prototype.inspect=function e(){var t="";var n=r.INSPECT_MAX_BYTES;if(this.length>0){t=this.toString("hex",0,n).match(/.{2}/g).join(" ");if(this.length>n)t+=" ... "}return"<Buffer "+t+">"};f.prototype.compare=function e(t,r,n,i,o){if(!f.isBuffer(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(o===undefined){o=this.length}if(r<0||n>t.length||i<0||o>this.length){throw new RangeError("out of range index")}if(i>=o&&r>=n){return 0}if(i>=o){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;o>>>=0;if(this===t)return 0;var s=o-i;var a=n-r;var u=Math.min(s,a);var c=this.slice(i,o);var l=t.slice(r,n);for(var h=0;h<u;++h){if(c[h]!==l[h]){s=c[h];a=l[h];break}}if(s<a)return-1;if(a<s)return 1;return 0};function E(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(isNaN(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=f.from(t,n)}if(f.isBuffer(t)){if(t.length===0){return-1}return S(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return S(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function S(e,t,r,n,i){var o=1;var s=e.length;var a=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}o=2;s/=2;a/=2;r/=2}}function f(e,t){if(o===1){return e[t]}else{return e.readUInt16BE(t*o)}}var u;if(i){var c=-1;for(u=r;u<s;u++){if(f(e,u)===f(t,c===-1?0:u-c)){if(c===-1)c=u;if(u-c+1===a)return c*o}else{if(c!==-1)u-=u-c;c=-1}}}else{if(r+a>s)r=s-a;for(u=r;u>=0;u--){var l=true;for(var h=0;h<a;h++){if(f(e,u+h)!==f(t,h)){l=false;break}}if(l)return u}}return-1}f.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};f.prototype.indexOf=function e(t,r,n){return E(this,t,r,n,true)};f.prototype.lastIndexOf=function e(t,r,n){return E(this,t,r,n,false)};function k(e,t,r,n){r=Number(r)||0;var i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");if(n>o/2){n=o/2}for(var s=0;s<n;++s){var a=parseInt(t.substr(s*2,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function x(e,t,r,n){return Z($(t,e.length-r),e,r,n)}function A(e,t,r,n){return Z(G(t),e,r,n)}function C(e,t,r,n){return A(e,t,r,n)}function R(e,t,r,n){return Z(X(t),e,r,n)}function T(e,t,r,n){return Z(Y(t,e.length-r),e,r,n)}f.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-r;if(n===undefined||n>o)n=o;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var s=false;for(;;){switch(i){case"hex":return k(this,t,r,n);case"utf8":case"utf-8":return x(this,t,r,n);case"ascii":return A(this,t,r,n);case"latin1":case"binary":return C(this,t,r,n);case"base64":return R(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();s=true}}};f.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(e,t,r){if(t===0&&r===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,r))}}function B(e,t,r){r=Math.min(e.length,r);var n=[];var i=t;while(i<r){var o=e[i];var s=null;var a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var f,u,c,l;switch(a){case 1:if(o<128){s=o}break;case 2:f=e[i+1];if((f&192)===128){l=(o&31)<<6|f&63;if(l>127){s=l}}break;case 3:f=e[i+1];u=e[i+2];if((f&192)===128&&(u&192)===128){l=(o&15)<<12|(f&63)<<6|u&63;if(l>2047&&(l<55296||l>57343)){s=l}}break;case 4:f=e[i+1];u=e[i+2];c=e[i+3];if((f&192)===128&&(u&192)===128&&(c&192)===128){l=(o&15)<<18|(f&63)<<12|(u&63)<<6|c&63;if(l>65535&&l<1114112){s=l}}}}if(s===null){s=65533;a=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023}n.push(s);i+=a}return M(n)}var j=4096;function M(e){var t=e.length;if(t<=j){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=j))}return r}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function q(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var i="";for(var o=t;o<r;++o){i+=J(e[o])}return i}function D(e,t,r){var n=e.slice(t,r);var i="";for(var o=0;o<n.length;o+=2){i+=String.fromCharCode(n[o]+n[o+1]*256)}return i}f.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var i=this.subarray(t,r);i.__proto__=f.prototype;return i};function N(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)N(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[t+s]*o}return i};f.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){N(t,r,this.length)}var i=this[t+--r];var o=1;while(r>0&&(o*=256)){i+=this[t+--r]*o}return i};f.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)N(t,1,this.length);return this[t]};f.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);return this[t]|this[t+1]<<8};f.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);return this[t]<<8|this[t+1]};f.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};f.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};f.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)N(t,r,this.length);var i=this[t];var o=1;var s=0;while(++s<r&&(o*=256)){i+=this[t+s]*o}o*=128;if(i>=o)i-=Math.pow(2,8*r);return i};f.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)N(t,r,this.length);var i=r;var o=1;var s=this[t+--i];while(i>0&&(o*=256)){s+=this[t+--i]*o}o*=128;if(s>=o)s-=Math.pow(2,8*r);return s};f.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)N(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};f.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)N(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};f.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};f.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return i.read(this,t,true,23,4)};f.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)N(t,4,this.length);return i.read(this,t,false,23,4)};f.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)N(t,8,this.length);return i.read(this,t,true,52,8)};f.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)N(t,8,this.length);return i.read(this,t,false,52,8)};function U(e,t,r,n,i,o){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;U(this,t,r,n,o,0)}var s=1;var a=0;this[r]=t&255;while(++a<n&&(s*=256)){this[r+a]=t/s&255}return r+n};f.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){var o=Math.pow(2,8*n)-1;U(this,t,r,n,o,0)}var s=n-1;var a=1;this[r+s]=t&255;while(--s>=0&&(a*=256)){this[r+s]=t/a&255}return r+n};f.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,1,255,0);this[r]=t&255;return r+1};f.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};f.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};f.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};f.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};f.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);U(this,t,r,n,o-1,-o)}var s=0;var a=1;var f=0;this[r]=t&255;while(++s<n&&(a*=256)){if(t<0&&f===0&&this[r+s-1]!==0){f=1}this[r+s]=(t/a>>0)-f&255}return r+n};f.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){var o=Math.pow(2,8*n-1);U(this,t,r,n,o-1,-o)}var s=n-1;var a=1;var f=0;this[r+s]=t&255;while(--s>=0&&(a*=256)){if(t<0&&f===0&&this[r+s+1]!==0){f=1}this[r+s]=(t/a>>0)-f&255}return r+n};f.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};f.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};f.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};f.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};f.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)U(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,o){t=+t;r=r>>>0;if(!o){P(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38)}i.write(e,t,r,n,23,4);return r+4}f.prototype.writeFloatLE=function e(t,r,n){return z(this,t,r,true,n)};f.prototype.writeFloatBE=function e(t,r,n){return z(this,t,r,false,n)};function F(e,t,r,n,o){t=+t;r=r>>>0;if(!o){P(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308)}i.write(e,t,r,n,52,8);return r+8}f.prototype.writeDoubleLE=function e(t,r,n){return F(this,t,r,true,n)};f.prototype.writeDoubleBE=function e(t,r,n){return F(this,t,r,false,n)};f.prototype.copy=function e(t,r,n,i){if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}var o=i-n;var s;if(this===t&&n<r&&r<i){for(s=o-1;s>=0;--s){t[s+r]=this[s+n]}}else if(o<1e3){for(s=0;s<o;++s){t[s+r]=this[s+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r)}return o};f.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(t.length===1){var o=t.charCodeAt(0);if(o<256){t=o}}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!f.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var s;if(typeof t==="number"){for(s=r;s<n;++s){this[s]=t}}else{var a=f.isBuffer(t)?t:new f(t,i);var u=a.length;for(s=0;s<n-r;++s){this[s+r]=a[s%u]}}return this};var W=/[^+\/0-9A-Za-z-_]/g;function V(e){e=H(e).replace(W,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function H(e){if(e.trim)return e.trim();return e.replace(/^\s+|\s+$/g,"")}function J(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function $(e,t){t=t||Infinity;var r;var n=e.length;var i=null;var o=[];for(var s=0;s<n;++s){r=e.charCodeAt(s);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)o.push(239,191,189);continue}else if(s+1===n){if((t-=3)>-1)o.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)o.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)o.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return o}function G(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function Y(e,t){var r,n,i;var o=[];for(var s=0;s<e.length;++s){if((t-=2)<0)break;r=e.charCodeAt(s);n=r>>8;i=r%256;o.push(i);o.push(n)}return o}function X(e){return n.toByteArray(V(e))}function Z(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function K(e){return e!==e}},{"base64-js":2,ieee754:6}],5:[function(e,t,r){function n(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=n;n.EventEmitter=n;n.prototype._events=undefined;n.prototype._maxListeners=undefined;n.defaultMaxListeners=10;n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};n.prototype.emit=function(e){var t,r,n,o,f,u;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||s(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{var c=new Error('Uncaught, unspecified "error" event. ('+t+")");c.context=t;throw c}}}r=this._events[e];if(a(r))return false;if(i(r)){switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1);r.apply(this,o)}}else if(s(r)){o=Array.prototype.slice.call(arguments,1);u=r.slice();n=u.length;for(f=0;f<n;f++)u[f].apply(this,o)}return true};n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,i(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(s(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(s(this._events[e])&&!this._events[e].warned){if(!a(this._maxListeners)){r=this._maxListeners}else{r=n.defaultMaxListeners}if(r&&r>0&&this._events[e].length>r){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};n.prototype.on=n.prototype.addListener;n.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=false;function n(){this.removeListener(e,n);if(!r){r=true;t.apply(this,arguments)}}n.listener=t;this.on(e,n);return this};n.prototype.removeListener=function(e,t){var r,n,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];o=r.length;n=-1;if(r===t||i(r.listener)&&r.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(s(r)){for(a=o;a-- >0;){if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}}if(n<0)return this;if(r.length===1){r.length=0;delete this._events[e]}else{r.splice(n,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}r=this._events[e];if(i(r)){this.removeListener(e,r)}else if(r){while(r.length)this.removeListener(e,r[r.length-1])}delete this._events[e];return this};n.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(i(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;else if(t)return t.length}return 0};n.listenerCount=function(e,t){return e.listenerCount(t)};function i(e){return typeof e==="function"}function o(e){return typeof e==="number"}function s(e){return typeof e==="object"&&e!==null}function a(e){return e===void 0}},{}],6:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s;var a=i*8-n-1;var f=(1<<a)-1;var u=f>>1;var c=-7;var l=r?i-1:0;var h=r?-1:1;var d=e[t+l];l+=h;o=d&(1<<-c)-1;d>>=-c;c+=a;for(;c>0;o=o*256+e[t+l],l+=h,c-=8){}s=o&(1<<-c)-1;o>>=-c;c+=n;for(;c>0;s=s*256+e[t+l],l+=h,c-=8){}if(o===0){o=1-u}else if(o===f){return s?NaN:(d?-1:1)*Infinity}else{s=s+Math.pow(2,n);o=o-u}return(d?-1:1)*s*Math.pow(2,o-n)};r.write=function(e,t,r,n,i,o){var s,a,f;var u=o*8-i-1;var c=(1<<u)-1;var l=c>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:o-1;var p=n?1:-1;var g=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){a=isNaN(t)?1:0;s=c}else{s=Math.floor(Math.log(t)/Math.LN2);if(t*(f=Math.pow(2,-s))<1){s--;f*=2}if(s+l>=1){t+=h/f}else{t+=h*Math.pow(2,1-l)}if(t*f>=2){s++;f/=2}if(s+l>=c){a=0;s=c}else if(s+l>=1){a=(t*f-1)*Math.pow(2,i);s=s+l}else{a=t*Math.pow(2,l-1)*Math.pow(2,i);s=0}}for(;i>=8;e[r+d]=a&255,d+=p,a/=256,i-=8){}s=s<<i|a;u+=i
;for(;u>0;e[r+d]=s&255,d+=p,s/=256,u-=8){}e[r+d-p]|=g*128}},{}],7:[function(e,t,r){var n=t.exports={};var i;var o;function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=s}}catch(e){i=s}try{if(typeof clearTimeout==="function"){o=clearTimeout}else{o=a}}catch(e){o=a}})();function f(e){if(i===setTimeout){return setTimeout(e,0)}if((i===s||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function u(e){if(o===clearTimeout){return clearTimeout(e)}if((o===a||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(e)}try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}var c=[];var l=false;var h;var d=-1;function p(){if(!l||!h){return}l=false;if(h.length){c=h.concat(c)}else{d=-1}if(c.length){g()}}function g(){if(l){return}var e=f(p);l=true;var t=c.length;while(t){h=c;c=[];while(++d<t){if(h){h[d].run()}}d=-1;t=c.length}h=null;l=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}c.push(new v(e,t));if(c.length===1&&!l){f(g)}};function v(e,t){this.fun=e;this.array=t}v.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function y(){}n.on=y;n.addListener=y;n.once=y;n.off=y;n.removeListener=y;n.removeAllListeners=y;n.emit=y;n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],8:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function e(t,r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}},{}],9:[function(e,t,r){t.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},{}],10:[function(e,t,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!E(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(a(arguments[r]))}return t.join(" ")}var r=1;var n=arguments;var o=n.length;var s=String(e).replace(i,function(e){if(e==="%%")return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}});for(var f=n[r];r<o;f=n[++r]){if(b(f)||!A(f)){s+=" "+f}else{s+=" "+a(f)}}return s};r.deprecate=function(e,i){if(k(n.process)){return function(){return r.deprecate(e,i).apply(this,arguments)}}if(t.noDeprecation===true){return e}var o=false;function s(){if(!o){if(t.throwDeprecation){throw new Error(i)}else if(t.traceDeprecation){console.trace(i)}else{console.error(i)}o=true}return e.apply(this,arguments)}return s};var o={};var s;r.debuglog=function(e){if(k(s))s=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!o[e]){if(new RegExp("\\b"+e+"\\b","i").test(s)){var n=t.pid;o[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else{o[e]=function(){}}}return o[e]};function a(e,t){var n={seen:[],stylize:u};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(m(t)){n.showHidden=t}else if(t){r._extend(n,t)}if(k(n.showHidden))n.showHidden=false;if(k(n.depth))n.depth=2;if(k(n.colors))n.colors=false;if(k(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=f;return l(n,e,n.depth)}r.inspect=a;a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function f(e,t){var r=a.styles[t];if(r){return"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m"}else{return e}}function u(e,t){return e}function c(e){var t={};e.forEach(function(e,r){t[e]=true});return t}function l(e,t,n){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==r.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(n,e);if(!E(i)){i=l(e,i,n)}return i}var o=h(e,t);if(o){return o}var s=Object.keys(t);var a=c(s);if(e.showHidden){s=Object.getOwnPropertyNames(t)}if(R(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0)){return d(t)}if(s.length===0){if(T(t)){var f=t.name?": "+t.name:"";return e.stylize("[Function"+f+"]","special")}if(x(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(C(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(R(t)){return d(t)}}var u="",m=false,b=["{","}"];if(y(t)){m=true;b=["[","]"]}if(T(t)){var w=t.name?": "+t.name:"";u=" [Function"+w+"]"}if(x(t)){u=" "+RegExp.prototype.toString.call(t)}if(C(t)){u=" "+Date.prototype.toUTCString.call(t)}if(R(t)){u=" "+d(t)}if(s.length===0&&(!m||t.length==0)){return b[0]+u+b[1]}if(n<0){if(x(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var _;if(m){_=p(e,t,n,a,s)}else{_=s.map(function(r){return g(e,t,n,a,r,m)})}e.seen.pop();return v(_,u,b)}function h(e,t){if(k(t))return e.stylize("undefined","undefined");if(E(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(_(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i){var o=[];for(var s=0,a=t.length;s<a;++s){if(I(t,String(s))){o.push(g(e,t,r,n,String(s),true))}else{o.push("")}}i.forEach(function(i){if(!i.match(/^\d+$/)){o.push(g(e,t,r,n,i,true))}});return o}function g(e,t,r,n,i,o){var s,a,f;f=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(f.get){if(f.set){a=e.stylize("[Getter/Setter]","special")}else{a=e.stylize("[Getter]","special")}}else{if(f.set){a=e.stylize("[Setter]","special")}}if(!I(n,i)){s="["+i+"]"}if(!a){if(e.seen.indexOf(f.value)<0){if(b(r)){a=l(e,f.value,null)}else{a=l(e,f.value,r-1)}if(a.indexOf("\n")>-1){if(o){a=a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{a="\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{a=e.stylize("[Circular]","special")}}if(k(s)){if(o&&i.match(/^\d+$/)){return a}s=JSON.stringify(""+i);if(s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){s=s.substr(1,s.length-2);s=e.stylize(s,"name")}else{s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");s=e.stylize(s,"string")}}return s+": "+a}function v(e,t,r){var n=0;var i=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(i>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function y(e){return Array.isArray(e)}r.isArray=y;function m(e){return typeof e==="boolean"}r.isBoolean=m;function b(e){return e===null}r.isNull=b;function w(e){return e==null}r.isNullOrUndefined=w;function _(e){return typeof e==="number"}r.isNumber=_;function E(e){return typeof e==="string"}r.isString=E;function S(e){return typeof e==="symbol"}r.isSymbol=S;function k(e){return e===void 0}r.isUndefined=k;function x(e){return A(e)&&B(e)==="[object RegExp]"}r.isRegExp=x;function A(e){return typeof e==="object"&&e!==null}r.isObject=A;function C(e){return A(e)&&B(e)==="[object Date]"}r.isDate=C;function R(e){return A(e)&&(B(e)==="[object Error]"||e instanceof Error)}r.isError=R;function T(e){return typeof e==="function"}r.isFunction=T;function L(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=L;r.isBuffer=e("./support/isBuffer");function B(e){return Object.prototype.toString.call(e)}function j(e){return e<10?"0"+e.toString(10):e.toString(10)}var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date;var t=[j(e.getHours()),j(e.getMinutes()),j(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}r.log=function(){console.log("%s - %s",O(),r.format.apply(r,arguments))};r.inherits=e("inherits");r._extend=function(e,t){if(!t||!A(t))return e;var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e};function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":9,_process:7,inherits:8}],11:[function(e,t,r){(function(t){"use strict";var n=e("buffer");var i=n.Buffer;var o=n.SlowBuffer;var s=n.kMaxLength||2147483647;r.alloc=function e(t,r,n){if(typeof i.alloc==="function"){return i.alloc(t,r,n)}if(typeof n==="number"){throw new TypeError("encoding must not be number")}if(typeof t!=="number"){throw new TypeError("size must be a number")}if(t>s){throw new RangeError("size is too large")}var o=n;var a=r;if(a===undefined){o=undefined;a=0}var f=new i(t);if(typeof a==="string"){var u=new i(a,o);var c=u.length;var l=-1;while(++l<t){f[l]=u[l%c]}}else{f.fill(a)}return f};r.allocUnsafe=function e(t){if(typeof i.allocUnsafe==="function"){return i.allocUnsafe(t)}if(typeof t!=="number"){throw new TypeError("size must be a number")}if(t>s){throw new RangeError("size is too large")}return new i(t)};r.from=function e(r,n,o){if(typeof i.from==="function"&&(!t.Uint8Array||Uint8Array.from!==i.from)){return i.from(r,n,o)}if(typeof r==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof r==="string"){return new i(r,n)}if(typeof ArrayBuffer!=="undefined"&&r instanceof ArrayBuffer){var s=n;if(arguments.length===1){return new i(r)}if(typeof s==="undefined"){s=0}var a=o;if(typeof a==="undefined"){a=r.byteLength-s}if(s>=r.byteLength){throw new RangeError("'offset' is out of bounds")}if(a>r.byteLength-s){throw new RangeError("'length' is out of bounds")}return new i(r.slice(s,s+a))}if(i.isBuffer(r)){var f=new i(r.length);r.copy(f,0,0,r.length);return f}if(r){if(Array.isArray(r)||typeof ArrayBuffer!=="undefined"&&r.buffer instanceof ArrayBuffer||"length"in r){return new i(r)}if(r.type==="Buffer"&&Array.isArray(r.data)){return new i(r.data)}}throw new TypeError("First argument must be a string, Buffer, "+"ArrayBuffer, Array, or array-like object.")};r.allocUnsafeSlow=function e(t){if(typeof i.allocUnsafeSlow==="function"){return i.allocUnsafeSlow(t)}if(typeof t!=="number"){throw new TypeError("size must be a number")}if(t>=s){throw new RangeError("size is too large")}return new o(t)}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{buffer:4}],12:[function(e,t,r){var n=e("./lib/fingerprint.js");var i=e("./lib/pad.js");var o=0,s=4,a=36,f=Math.pow(a,s);function u(){return i((Math.random()*f<<0).toString(a),s)}function c(){o=o<f?o:0;o++;return o-1}function l(){var e="c",t=(new Date).getTime().toString(a),r=i(c().toString(a),s),o=n(),f=u()+u();return e+t+r+o+f}l.slug=function e(){var t=(new Date).getTime().toString(36),r=c().toString(36).slice(-4),i=n().slice(0,1)+n().slice(-1),o=u().slice(-2);return t.slice(-2)+r+i+o};l.fingerprint=n;t.exports=l},{"./lib/fingerprint.js":13,"./lib/pad.js":14}],13:[function(e,t,r){var n=e("./pad.js");var i=typeof window==="object"?window:self;var o=Object.keys(i);var s=navigator.mimeTypes?navigator.mimeTypes.length:0;var a=n((s+navigator.userAgent.length).toString(36)+o.toString(36),4);t.exports=function e(){return a}},{"./pad.js":14}],14:[function(e,t,r){t.exports=function e(t,r){var n="000000000"+t;return n.substr(n.length-r)}},{}],15:[function(e,t,r){r=t.exports=e("./debug");r.log=o;r.formatArgs=i;r.save=s;r.load=a;r.useColors=n;r.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}r.formatters.j=function(e){return JSON.stringify(e)};function i(){var e=arguments;var t=this.useColors;e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff);if(!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0;var o=0;e[0].replace(/%[a-z%]/g,function(e){if("%%"===e)return;i++;if("%c"===e){o=i}});e.splice(o,0,n);return e}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{if(null==e){localStorage.removeItem("debug")}else{localStorage.debug=e}}catch(e){}}function a(){var e;try{e=localStorage.debug}catch(e){}return e}r.enable(a())},{"./debug":16}],16:[function(e,t,r){r=t.exports=s;r.coerce=c;r.disable=f;r.enable=a;r.enabled=u;r.humanize=e("ms");r.names=[];r.skips=[];r.formatters={};var n=0;var i;function o(){return r.colors[n++%r.colors.length]}function s(e){function t(){}t.enabled=false;function n(){var e=n;var t=+new Date;var s=t-(i||t);e.diff=s;e.prev=i;e.curr=t;i=t;if(null==e.useColors)e.useColors=r.useColors();if(null==e.color&&e.useColors)e.color=o();var a=Array.prototype.slice.call(arguments);a[0]=r.coerce(a[0]);if("string"!==typeof a[0]){a=["%o"].concat(a)}var f=0;a[0]=a[0].replace(/%([a-z%])/g,function(t,n){if(t==="%%")return t;f++;var i=r.formatters[n];if("function"===typeof i){var o=a[f];t=i.call(e,o);a.splice(f,1);f--}return t});if("function"===typeof r.formatArgs){a=r.formatArgs.apply(e,a)}var u=n.log||r.log||console.log.bind(console);u.apply(e,a)}n.enabled=true;var s=r.enabled(e)?n:t;s.namespace=e;return s}function a(e){r.save(e);var t=(e||"").split(/[\s,]+/);var n=t.length;for(var i=0;i<n;i++){if(!t[i])continue;e=t[i].replace(/\*/g,".*?");if(e[0]==="-"){r.skips.push(new RegExp("^"+e.substr(1)+"$"))}else{r.names.push(new RegExp("^"+e+"$"))}}}function f(){r.enable("")}function u(e){var t,n;for(t=0,n=r.skips.length;t<n;t++){if(r.skips[t].test(e)){return false}}for(t=0,n=r.names.length;t<n;t++){if(r.names[t].test(e)){return true}}return false}function c(e){if(e instanceof Error)return e.stack||e.message;return e}},{ms:17}],17:[function(e,t,r){var n=1e3;var i=n*60;var o=i*60;var s=o*24;var a=s*365.25;t.exports=function(e,t){t=t||{};if("string"==typeof e)return f(e);return t.long?c(e):u(e)};function f(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);var f=(t[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"y":return r*a;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"h":return r*o;case"minutes":case"minute":case"m":return r*i;case"seconds":case"second":case"s":return r*n;case"ms":return r}}function u(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}function c(e){return l(e,s,"day")||l(e,o,"hour")||l(e,i,"minute")||l(e,n,"second")||e+" ms"}function l(e,t,r){if(e<t)return;if(e<t*1.5)return Math.floor(e/t)+" "+r;return Math.ceil(e/t)+" "+r+"s"}},{}],18:[function(e,t,r){t.exports=function e(){if(typeof window==="undefined")return null;var t={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};if(!t.RTCPeerConnection)return null;return t}},{}],19:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{dup:8}],20:[function(e,t,r){t.exports=function(e){return e!=null&&(n(e)||i(e)||!!e._isBuffer)};function n(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function i(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&n(e.slice(0,0))}},{}],21:[function(e,t,r){s.notEqual=i;s.notOk=o;s.equal=n;s.ok=s;t.exports=s;function n(e,t,r){s(e==t,r)}function i(e,t,r){s(e!=t,r)}function o(e,t){s(!e,t)}function s(e,t){if(!e)throw new Error(t||"AssertionError")}},{}],22:[function(e,t,r){var n=e("remove-array-items");var i=e("nanotiming");var o=e("assert");t.exports=s;function s(e){if(!(this instanceof s))return new s(e);this._name=e||"nanobus";this._starListeners=[];this._listeners={}}s.prototype.emit=function(e){o.equal(typeof e,"string","nanobus.emit: eventName should be type string");var t=[];for(var r=1,n=arguments.length;r<n;r++){t.push(arguments[r])}var s=i(this._name+"('"+e+"')");var a=this._listeners[e];if(a&&a.length>0){this._emit(this._listeners[e],t)}if(this._starListeners.length>0){this._emit(this._starListeners,e,t,s.uuid)}s();return this};s.prototype.on=s.prototype.addListener=function(e,t){o.equal(typeof e,"string","nanobus.on: eventName should be type string");o.equal(typeof t,"function","nanobus.on: listener should be type function");if(e==="*"){this._starListeners.push(t)}else{if(!this._listeners[e])this._listeners[e]=[];this._listeners[e].push(t)}return this};s.prototype.prependListener=function(e,t){o.equal(typeof e,"string","nanobus.prependListener: eventName should be type string");o.equal(typeof t,"function","nanobus.prependListener: listener should be type function");if(e==="*"){this._starListeners.unshift(t)}else{if(!this._listeners[e])this._listeners[e]=[];this._listeners[e].unshift(t)}return this};s.prototype.once=function(e,t){o.equal(typeof e,"string","nanobus.once: eventName should be type string");o.equal(typeof t,"function","nanobus.once: listener should be type function");var r=this;this.on(e,n);function n(){t.apply(r,arguments);r.removeListener(e,n)}return this};s.prototype.prependOnceListener=function(e,t){o.equal(typeof e,"string","nanobus.prependOnceListener: eventName should be type string");o.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var r=this;this.prependListener(e,n);function n(){t.apply(r,arguments);r.removeListener(e,n)}return this};s.prototype.removeListener=function(e,t){o.equal(typeof e,"string","nanobus.removeListener: eventName should be type string");o.equal(typeof t,"function","nanobus.removeListener: listener should be type function");if(e==="*"){this._starListeners=this._starListeners.slice();return r(this._starListeners,t)}else{if(typeof this._listeners[e]!=="undefined"){this._listeners[e]=this._listeners[e].slice()}return r(this._listeners[e],t)}function r(e,t){if(!e)return;var r=e.indexOf(t);if(r!==-1){n(e,r,1);return true}}};s.prototype.removeAllListeners=function(e){if(e){if(e==="*"){this._starListeners=[]}else{this._listeners[e]=[]}}else{this._starListeners=[];this._listeners={}}return this};s.prototype.listeners=function(e){var t=e!=="*"?this._listeners[e]:this._starListeners;var r=[];if(t){var n=t.length;for(var i=0;i<n;i++)r.push(t[i])}return r};s.prototype._emit=function(e,t,r,n){if(typeof e==="undefined")return;if(e.length===0)return;if(r===undefined){r=t;t=null}if(t){if(n!==undefined){r=[t].concat(r,n)}else{r=[t].concat(r)}}var i=e.length;for(var o=0;o<i;o++){var s=e[o];s.apply(s,r)}}},{assert:1,nanotiming:24,"remove-array-items":27}],23:[function(e,t,r){var n=e("assert");var i=typeof window!=="undefined";function o(){var e;if(i){if(!window._nanoScheduler)window._nanoScheduler=new s(true);e=window._nanoScheduler}else{e=new s}return e}function s(e){this.hasWindow=e;this.hasIdle=this.hasWindow&&window.requestIdleCallback;this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout;this.scheduled=false;this.queue=[]}s.prototype.push=function(e){n.equal(typeof e,"function","nanoscheduler.push: cb should be type function");if(!this.hasWindow)return;this.queue.push(e);this.schedule()};s.prototype.schedule=function(){if(this.scheduled)return;this.scheduled=true;var e=this;this.method(function(t){var r;while(e.queue.length&&t.timeRemaining()>0){r=e.queue.shift();r(t)}e.scheduled=false;if(e.queue.length)e.schedule()})};s.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})};t.exports=o},{assert:21}],24:[function(e,t,r){var n=e("nanoscheduler")();var i=e("assert");var o;s.disabled=true;try{o=window.performance;s.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!o.mark}catch(e){}t.exports=s;function s(e){i.equal(typeof e,"string","nanotiming: name should be type string");if(s.disabled)return a;var t=(o.now()*1e4).toFixed()%Number.MAX_SAFE_INTEGER;var r="start-"+t+"-"+e;o.mark(r);function f(i){var s="end-"+t+"-"+e;o.mark(s);n.push(function(){var n=null;try{var a=e+" ["+t+"]";o.measure(a,r,s);o.clearMarks(r);o.clearMarks(s)}catch(e){n=e}if(i)i(n,e)})}f.uuid=t;return f}function a(e){if(e){n.push(function(){e(new Error("nanotiming: performance API unavailable"))})}}},{assert:1,nanoscheduler:23}],25:[function(e,t,r){(function(e){"use strict";if(!e.version||e.version.indexOf("v0.")===0||e.version.indexOf("v1.")===0&&e.version.indexOf("v1.8.")!==0){t.exports=r}else{t.exports=e.nextTick}function r(t,r,n,i){if(typeof t!=="function"){throw new TypeError('"callback" argument must be a function')}var o=arguments.length;var s,a;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function e(){t.call(null,r)});case 3:return e.nextTick(function e(){t.call(null,r,n)});case 4:return e.nextTick(function e(){t.call(null,r,n,i)});default:s=new Array(o-1);a=0;while(a<s.length){s[a++]=arguments[a]}return e.nextTick(function e(){t.apply(null,s)})}}}).call(this,e("_process"))},{_process:7}],26:[function(e,t,r){(function(e,r,n){"use strict";function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=r.crypto||r.msCrypto;if(o&&o.getRandomValues){t.exports=s}else{t.exports=i}function s(t,i){if(t>65536)throw new Error("requested too many random bytes");var s=new r.Uint8Array(t);if(t>0){o.getRandomValues(s)}var a=new n(s.buffer);if(typeof i==="function"){return e.nextTick(function(){i(null,a)})}return a}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer)},{_process:7,buffer:4}],27:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var i,o=t.length;if(r>=o||n===0){return}n=r+n>o?o-r:n;var s=o-n;for(i=r;i<s;++i){t[i]=t[i+n]}t.length=s}},{}],28:[function(e,t,r){(function(r){t.exports=u;var n=e("debug")("simple-peer");var i=e("get-browser-rtc");var o=e("inherits");var s=e("randombytes");var a=e("readable-stream");var f=64*1024;o(u,a.Duplex);function u(e){var t=this;if(!(t instanceof u))return new u(e);t._id=s(4).toString("hex").slice(0,7);t._debug("new peer %o",e);e=Object.assign({allowHalfOpen:false},e);a.Duplex.call(t,e);t.channelName=e.initiator?e.channelName||s(20).toString("hex"):null;t._isChromium=typeof window!=="undefined"&&!!window.webkitRTCPeerConnection;t.initiator=e.initiator||false;t.channelConfig=e.channelConfig||u.channelConfig;t.config=e.config||u.config;t.constraints=t._transformConstraints(e.constraints||u.constraints);t.offerConstraints=t._transformConstraints(e.offerConstraints||{});t.answerConstraints=t._transformConstraints(e.answerConstraints||{});t.reconnectTimer=e.reconnectTimer||false;t.sdpTransform=e.sdpTransform||function(e){return e};t.stream=e.stream||false;t.trickle=e.trickle!==undefined?e.trickle:true;t.destroyed=false;t.connected=false;t.remoteAddress=undefined;t.remoteFamily=undefined;t.remotePort=undefined;t.localAddress=undefined;t.localPort=undefined;t._wrtc=e.wrtc&&typeof e.wrtc==="object"?e.wrtc:i();if(!t._wrtc){if(typeof window==="undefined"){throw new Error("No WebRTC support: Specify `opts.wrtc` option in this environment")}else{throw new Error("No WebRTC support: Not a supported browser")}}t._pcReady=false;t._channelReady=false;t._iceComplete=false;t._channel=null;t._pendingCandidates=[];t._previousStreams=[];t._chunk=null;t._cb=null;t._interval=null;t._reconnectTimeout=null;t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints);t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates);t._isReactNativeWebrtc=typeof t._pc._peerConnectionId==="number";t._pc.oniceconnectionstatechange=function(){t._onIceConnectionStateChange()};t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()};t._pc.onicecandidate=function(e){t._onIceCandidate(e)};if(t.initiator){var r=false;t._pc.onnegotiationneeded=function(){if(!r)t._createOffer();r=true};t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)})}else{t._pc.ondatachannel=function(e){t._setupData(e)}}if("addTrack"in t._pc){if(t.stream){t.stream.getTracks().forEach(function(e){t._pc.addTrack(e,t.stream)})}t._pc.ontrack=function(e){t._onTrack(e)}}else{if(t.stream)t._pc.addStream(t.stream);t._pc.onaddstream=function(e){t._onAddStream(e)}}if(t.initiator&&t._isWrtc){t._pc.onnegotiationneeded()}t._onFinishBound=function(){t._onFinish()};t.once("finish",t._onFinishBound)}u.WEBRTC_SUPPORT=!!i();u.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]};u.constraints={};u.channelConfig={};Object.defineProperty(u.prototype,"bufferSize",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}});u.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress}};u.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if(typeof e==="string"){try{e=JSON.parse(e)}catch(t){e={}}}t._debug("signal()");if(e.candidate){if(t._pc.remoteDescription)t._addIceCandidate(e.candidate);else t._pendingCandidates.push(e.candidate)}if(e.sdp){t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){if(t.destroyed)return;t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)});t._pendingCandidates=[];if(t._pc.remoteDescription.type==="offer")t._createAnswer()},function(e){t._onError(e)})}if(!e.sdp&&!e.candidate){t._destroy(new Error("signal() called with invalid signal data"))}};u.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),c,function(e){t._onError(e)})}catch(e){t._destroy(new Error("error adding candidate: "+e.message))}};u.prototype.send=function(e){var t=this;if(t._isWrtc&&r.isBuffer(e)){e=new Uint8Array(e)}t._channel.send(e)};u.prototype.destroy=function(e){var t=this;t._destroy(null,e)};u.prototype._destroy=function(e,t){var r=this;if(r.destroyed)return;if(t)r.once("close",t);r._debug("destroy (error: %s)",e&&e.message);r.readable=r.writable=false;if(!r._readableState.ended)r.push(null);if(!r._writableState.finished)r.end();r.destroyed=true;r.connected=false;r._pcReady=false;r._channelReady=false;r._previousStreams=null;clearInterval(r._interval);clearTimeout(r._reconnectTimeout);r._interval=null;r._reconnectTimeout=null;r._chunk=null;r._cb=null;if(r._onFinishBound)r.removeListener("finish",r._onFinishBound);r._onFinishBound=null;if(r._pc){try{r._pc.close()}catch(e){}r._pc.oniceconnectionstatechange=null;r._pc.onsignalingstatechange=null;r._pc.onicecandidate=null;if("addTrack"in r._pc){r._pc.ontrack=null}else{r._pc.onaddstream=null}r._pc.onnegotiationneeded=null;r._pc.ondatachannel=null}if(r._channel){try{r._channel.close()}catch(e){}r._channel.onmessage=null;r._channel.onopen=null;r._channel.onclose=null}r._pc=null;r._channel=null;if(e)r.emit("error",e);r.emit("close")};u.prototype._setupData=function(e){var t=this;t._channel=e.channel;t._channel.binaryType="arraybuffer";if(typeof t._channel.bufferedAmountLowThreshold==="number"){t._channel.bufferedAmountLowThreshold=f}t.channelName=t._channel.label;t._channel.onmessage=function(e){t._onChannelMessage(e)};t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()};t._channel.onopen=function(){t._onChannelOpen()};t._channel.onclose=function(){t._onChannelClose()}};u.prototype._read=function(){};u.prototype._write=function(e,t,r){var n=this;if(n.destroyed)return r(new Error("cannot write after peer is destroyed"));if(n.connected){try{n.send(e)}catch(e){return n._onError(e)}if(n._channel.bufferedAmount>f){n._debug("start backpressure: bufferedAmount %d",n._channel.bufferedAmount);n._cb=r}else{r(null)}}else{n._debug("write before connect");n._chunk=e;n._cb=r}};u.prototype._onFinish=function(){var e=this;if(e.destroyed)return;if(e.connected){t()}else{e.once("connect",t)}function t(){setTimeout(function(){e._destroy()},100)}};u.prototype._createOffer=function(){var e=this;if(e.destroyed)return;e._pc.createOffer(function(t){if(e.destroyed)return;t.sdp=e.sdpTransform(t.sdp);e._pc.setLocalDescription(t,c,function(t){e._onError(t)});var r=function(){var r=e._pc.localDescription||t;e._debug("signal");e.emit("signal",{type:r.type,sdp:r.sdp})};if(e.trickle||e._iceComplete)r();else e.once("_iceComplete",r)},function(t){e._onError(t)},e.offerConstraints)};u.prototype._createAnswer=function(){var e=this;if(e.destroyed)return;e._pc.createAnswer(function(t){if(e.destroyed)return;t.sdp=e.sdpTransform(t.sdp);e._pc.setLocalDescription(t,c,function(t){e._onError(t)});if(e.trickle||e._iceComplete)r();else e.once("_iceComplete",r);function r(){var r=e._pc.localDescription||t;e._debug("signal");e.emit("signal",{type:r.type,sdp:r.sdp})}},function(t){e._onError(t)},e.answerConstraints)};u.prototype._onIceConnectionStateChange=function(){var e=this;if(e.destroyed)return;var t=e._pc.iceGatheringState;var r=e._pc.iceConnectionState;e._debug("iceConnectionStateChange %s %s",t,r);e.emit("iceConnectionStateChange",t,r);if(r==="connected"||r==="completed"){clearTimeout(e._reconnectTimeout);e._pcReady=true;e._maybeReady()}if(r==="disconnected"){if(e.reconnectTimer){clearTimeout(e._reconnectTimeout);e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)}else{e._destroy()}}if(r==="failed"){e._destroy(new Error("Ice connection failed."))}if(r==="closed"){e._destroy()}};u.prototype.getStats=function(e){var t=this;if(t._pc.getStats.length===0){t._pc.getStats().then(function(t){var r=[];t.forEach(function(e){r.push(e)});e(r)},function(e){t._onError(e)})}else if(t._isReactNativeWebrtc){t._pc.getStats(null,function(t){var r=[];t.forEach(function(e){r.push(e)});e(r)},function(e){t._onError(e)})}else if(t._pc.getStats.length>0){t._pc.getStats(function(t){var r=[];t.result().forEach(function(e){var t={};e.names().forEach(function(r){t[r]=e.stat(r)});t.id=e.id;t.type=e.type;t.timestamp=e.timestamp;r.push(t)});e(r)},function(e){t._onError(e)})}else{e([])}};u.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady);if(e.connected||e._connecting||!e._pcReady||!e._channelReady)return;e._connecting=true;e.getStats(function(t){e._connecting=false;e.connected=true;var r={};var n={};var i={};t.forEach(function(e){if(e.type==="remotecandidate"||e.type==="remote-candidate"){r[e.id]=e}if(e.type==="localcandidate"||e.type==="local-candidate"){n[e.id]=e}if(e.type==="candidatepair"||e.type==="candidate-pair"){i[e.id]=e}});t.forEach(function(e){if(e.type==="transport"){o(i[e.selectedCandidatePairId])}if(e.type==="googCandidatePair"&&e.googActiveConnection==="true"||(e.type==="candidatepair"||e.type==="candidate-pair")&&e.selected){o(e)}});function o(t){var i=n[t.localCandidateId];if(i&&i.ip){e.localAddress=i.ip;e.localPort=Number(i.port)}else if(i&&i.ipAddress){e.localAddress=i.ipAddress;e.localPort=Number(i.portNumber)}else if(typeof t.googLocalAddress==="string"){i=t.googLocalAddress.split(":");e.localAddress=i[0]
;e.localPort=Number(i[1])}var o=r[t.remoteCandidateId];if(o&&o.ip){e.remoteAddress=o.ip;e.remotePort=Number(o.port)}else if(o&&o.ipAddress){e.remoteAddress=o.ipAddress;e.remotePort=Number(o.portNumber)}else if(typeof t.googRemoteAddress==="string"){o=t.googRemoteAddress.split(":");e.remoteAddress=o[0];e.remotePort=Number(o[1])}e.remoteFamily="IPv4";e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}if(e._chunk){try{e.send(e._chunk)}catch(t){return e._onError(t)}e._chunk=null;e._debug('sent chunk from "write before connect"');var s=e._cb;e._cb=null;s(null)}if(typeof e._channel.bufferedAmountLowThreshold!=="number"){e._interval=setInterval(function(){e._onInterval()},150);if(e._interval.unref)e._interval.unref()}e._debug("connect");e.emit("connect")})};u.prototype._onInterval=function(){if(!this._cb||!this._channel||this._channel.bufferedAmount>f){return}this._onChannelBufferedAmountLow()};u.prototype._onSignalingStateChange=function(){var e=this;if(e.destroyed)return;e._debug("signalingStateChange %s",e._pc.signalingState);e.emit("signalingStateChange",e._pc.signalingState)};u.prototype._onIceCandidate=function(e){var t=this;if(t.destroyed)return;if(e.candidate&&t.trickle){t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}})}else if(!e.candidate){t._iceComplete=true;t.emit("_iceComplete")}};u.prototype._onChannelMessage=function(e){var t=this;if(t.destroyed)return;var n=e.data;if(n instanceof ArrayBuffer)n=new r(n);t.push(n)};u.prototype._onChannelBufferedAmountLow=function(){var e=this;if(e.destroyed||!e._cb)return;e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null;t(null)};u.prototype._onChannelOpen=function(){var e=this;if(e.connected||e.destroyed)return;e._debug("on channel open");e._channelReady=true;e._maybeReady()};u.prototype._onChannelClose=function(){var e=this;if(e.destroyed)return;e._debug("on channel close");e._destroy()};u.prototype._onAddStream=function(e){var t=this;if(t.destroyed)return;t._debug("on add stream");t.emit("stream",e.stream)};u.prototype._onTrack=function(e){var t=this;if(t.destroyed)return;t._debug("on track");var r=e.streams[0].id;if(t._previousStreams.indexOf(r)!==-1)return;t._previousStreams.push(r);t.emit("stream",e.streams[0])};u.prototype._onError=function(e){var t=this;if(t.destroyed)return;t._debug("error %s",e.message||e);t._destroy(e)};u.prototype._debug=function(){var e=this;var t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0];n.apply(null,t)};u.prototype._transformConstraints=function(e){var t=this;if(Object.keys(e).length===0){return e}if((e.mandatory||e.optional)&&!t._isChromium){var r=Object.assign({},e.optional,e.mandatory);if(r.OfferToReceiveVideo!==undefined){r.offerToReceiveVideo=r.OfferToReceiveVideo;delete r["OfferToReceiveVideo"]}if(r.OfferToReceiveAudio!==undefined){r.offerToReceiveAudio=r.OfferToReceiveAudio;delete r["OfferToReceiveAudio"]}return r}else if(!e.mandatory&&!e.optional&&t._isChromium){if(e.offerToReceiveVideo!==undefined){e.OfferToReceiveVideo=e.offerToReceiveVideo;delete e["offerToReceiveVideo"]}if(e.offerToReceiveAudio!==undefined){e.OfferToReceiveAudio=e.offerToReceiveAudio;delete e["offerToReceiveAudio"]}return{mandatory:e}}return e};function c(){}}).call(this,e("buffer").Buffer)},{buffer:4,debug:15,"get-browser-rtc":18,inherits:30,randombytes:26,"readable-stream":38}],29:[function(e,t,r){(function(e){function t(e){if(Array.isArray){return Array.isArray(e)}return v(e)==="[object Array]"}r.isArray=t;function n(e){return typeof e==="boolean"}r.isBoolean=n;function i(e){return e===null}r.isNull=i;function o(e){return e==null}r.isNullOrUndefined=o;function s(e){return typeof e==="number"}r.isNumber=s;function a(e){return typeof e==="string"}r.isString=a;function f(e){return typeof e==="symbol"}r.isSymbol=f;function u(e){return e===void 0}r.isUndefined=u;function c(e){return v(e)==="[object RegExp]"}r.isRegExp=c;function l(e){return typeof e==="object"&&e!==null}r.isObject=l;function h(e){return v(e)==="[object Date]"}r.isDate=h;function d(e){return v(e)==="[object Error]"||e instanceof Error}r.isError=d;function p(e){return typeof e==="function"}r.isFunction=p;function g(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=g;r.isBuffer=e.isBuffer;function v(e){return Object.prototype.toString.call(e)}}).call(this,{isBuffer:e("../../../../is-buffer/index.js")})},{"../../../../is-buffer/index.js":20}],30:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{dup:8}],31:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return n.call(e)=="[object Array]"}},{}],32:[function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e){t.push(r)}return t};t.exports=l;var i=e("process-nextick-args");var o=e("core-util-is");o.inherits=e("inherits");var s=e("./_stream_readable");var a=e("./_stream_writable");o.inherits(l,s);var f=n(a.prototype);for(var u=0;u<f.length;u++){var c=f[u];if(!l.prototype[c])l.prototype[c]=a.prototype[c]}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e);a.call(this,e);if(e&&e.readable===false)this.readable=false;if(e&&e.writable===false)this.writable=false;this.allowHalfOpen=true;if(e&&e.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",h)}function h(){if(this.allowHalfOpen||this._writableState.ended)return;i(d,this)}function d(e){e.end()}function p(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r)}}},{"./_stream_readable":34,"./_stream_writable":36,"core-util-is":29,inherits:30,"process-nextick-args":25}],33:[function(e,t,r){"use strict";t.exports=o;var n=e("./_stream_transform");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(o,n);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}o.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":35,"core-util-is":29,inherits:30}],34:[function(e,t,r){(function(r){"use strict";t.exports=m;var n=e("process-nextick-args");var i=e("isarray");var o;m.ReadableState=y;var s=e("events").EventEmitter;var a=function(e,t){return e.listeners(t).length};var f;(function(){try{f=e("st"+"ream")}catch(e){}finally{if(!f)f=e("events").EventEmitter}})();var u=e("buffer").Buffer;var c=e("buffer-shims");var l=e("core-util-is");l.inherits=e("inherits");var h=e("util");var d=void 0;if(h&&h.debuglog){d=h.debuglog("stream")}else{d=function(){}}var p=e("./internal/streams/BufferList");var g;l.inherits(m,f);function v(e,t,r){if(typeof e.prependListener==="function"){return e.prependListener(t,r)}else{if(!e._events||!e._events[t])e.on(t,r);else if(i(e._events[t]))e._events[t].unshift(r);else e._events[t]=[r,e._events[t]]}}function y(t,r){o=o||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof o)this.objectMode=this.objectMode||!!t.readableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=~~this.highWaterMark;this.buffer=new p;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.defaultEncoding=t.defaultEncoding||"utf8";this.ranOut=false;this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(t.encoding){if(!g)g=e("string_decoder/").StringDecoder;this.decoder=new g(t.encoding);this.encoding=t.encoding}}function m(t){o=o||e("./_stream_duplex");if(!(this instanceof m))return new m(t);this._readableState=new y(t,this);this.readable=true;if(t&&typeof t.read==="function")this._read=t.read;f.call(this)}m.prototype.push=function(e,t){var r=this._readableState;if(!r.objectMode&&typeof e==="string"){t=t||r.defaultEncoding;if(t!==r.encoding){e=c.from(e,t);t=""}}return b(this,r,e,t,false)};m.prototype.unshift=function(e){var t=this._readableState;return b(this,t,e,"",true)};m.prototype.isPaused=function(){return this._readableState.flowing===false};function b(e,t,r,n,i){var o=k(t,r);if(o){e.emit("error",o)}else if(r===null){t.reading=false;x(e,t)}else if(t.objectMode||r&&r.length>0){if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var f;if(t.decoder&&!i&&!n){r=t.decoder.write(r);f=!t.objectMode&&r.length===0}if(!i)t.reading=false;if(!f){if(t.flowing&&t.length===0&&!t.sync){e.emit("data",r);e.read(0)}else{t.length+=t.objectMode?1:r.length;if(i)t.buffer.unshift(r);else t.buffer.push(r);if(t.needReadable)A(e)}}R(e,t)}}else if(!i){t.reading=false}return w(t)}function w(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}m.prototype.setEncoding=function(t){if(!g)g=e("string_decoder/").StringDecoder;this._readableState.decoder=new g(t);this._readableState.encoding=t;return this};var _=8388608;function E(e){if(e>=_){e=_}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function S(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=E(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}m.prototype.read=function(e){d("read",e);e=parseInt(e,10);var t=this._readableState;var r=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended)){d("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)U(this);else A(this);return null}e=S(e,t);if(e===0&&t.ended){if(t.length===0)U(this);return null}var n=t.needReadable;d("need readable",n);if(t.length===0||t.length-e<t.highWaterMark){n=true;d("length less than watermark",n)}if(t.ended||t.reading){n=false;d("reading or ended",n)}else if(n){d("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=S(r,t)}var i;if(e>0)i=I(e,t);else i=null;if(i===null){t.needReadable=true;e=0}else{t.length-=e}if(t.length===0){if(!t.ended)t.needReadable=true;if(r!==e&&t.ended)U(this)}if(i!==null)this.emit("data",i);return i};function k(e,t){var r=null;if(!u.isBuffer(t)&&typeof t!=="string"&&t!==null&&t!==undefined&&!e.objectMode){r=new TypeError("Invalid non-string/buffer chunk")}return r}function x(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();if(r&&r.length){t.buffer.push(r);t.length+=t.objectMode?1:r.length}}t.ended=true;A(e)}function A(e){var t=e._readableState;t.needReadable=false;if(!t.emittedReadable){d("emitReadable",t.flowing);t.emittedReadable=true;if(t.sync)n(C,e);else C(e)}}function C(e){d("emit readable");e.emit("readable");O(e)}function R(e,t){if(!t.readingMore){t.readingMore=true;n(T,e,t)}}function T(e,t){var r=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){d("maybeReadMore read 0");e.read(0);if(r===t.length)break;else r=t.length}t.readingMore=false}m.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};m.prototype.pipe=function(e,t){var i=this;var o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e);break}o.pipesCount+=1;d("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||t.end!==false)&&e!==r.stdout&&e!==r.stderr;var f=s?c:p;if(o.endEmitted)n(f);else i.once("end",f);e.on("unpipe",u);function u(e){d("onunpipe");if(e===i){p()}}function c(){d("onend");e.end()}var l=L(i);e.on("drain",l);var h=false;function p(){d("cleanup");e.removeListener("close",b);e.removeListener("finish",w);e.removeListener("drain",l);e.removeListener("error",m);e.removeListener("unpipe",u);i.removeListener("end",c);i.removeListener("end",p);i.removeListener("data",y);h=true;if(o.awaitDrain&&(!e._writableState||e._writableState.needDrain))l()}var g=false;i.on("data",y);function y(t){d("ondata");g=false;var r=e.write(t);if(false===r&&!g){if((o.pipesCount===1&&o.pipes===e||o.pipesCount>1&&F(o.pipes,e)!==-1)&&!h){d("false write response, pause",i._readableState.awaitDrain);i._readableState.awaitDrain++;g=true}i.pause()}}function m(t){d("onerror",t);_();e.removeListener("error",m);if(a(e,"error")===0)e.emit("error",t)}v(e,"error",m);function b(){e.removeListener("finish",w);_()}e.once("close",b);function w(){d("onfinish");e.removeListener("close",b);_()}e.once("finish",w);function _(){d("unpipe");i.unpipe(e)}e.emit("pipe",i);if(!o.flowing){d("pipe resume");i.resume()}return e};function L(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&a(e,"data")){t.flowing=true;O(e)}}}m.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this);return this}if(!e){var r=t.pipes;var n=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var i=0;i<n;i++){r[i].emit("unpipe",this)}return this}var o=F(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this);return this};m.prototype.on=function(e,t){var r=f.prototype.on.call(this,e,t);if(e==="data"){if(this._readableState.flowing!==false)this.resume()}else if(e==="readable"){var i=this._readableState;if(!i.endEmitted&&!i.readableListening){i.readableListening=i.needReadable=true;i.emittedReadable=false;if(!i.reading){n(B,this)}else if(i.length){A(this,i)}}}return r};m.prototype.addListener=m.prototype.on;function B(e){d("readable nexttick read 0");e.read(0)}m.prototype.resume=function(){var e=this._readableState;if(!e.flowing){d("resume");e.flowing=true;j(this,e)}return this};function j(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;n(M,e,t)}}function M(e,t){if(!t.reading){d("resume read 0");e.read(0)}t.resumeScheduled=false;t.awaitDrain=0;e.emit("resume");O(e);if(t.flowing&&!t.reading)e.read(0)}m.prototype.pause=function(){d("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){d("pause");this._readableState.flowing=false;this.emit("pause")}return this};function O(e){var t=e._readableState;d("flow",t.flowing);while(t.flowing&&e.read()!==null){}}m.prototype.wrap=function(e){var t=this._readableState;var r=false;var n=this;e.on("end",function(){d("wrapped end");if(t.decoder&&!t.ended){var e=t.decoder.end();if(e&&e.length)n.push(e)}n.push(null)});e.on("data",function(i){d("wrapped data");if(t.decoder)i=t.decoder.write(i);if(t.objectMode&&(i===null||i===undefined))return;else if(!t.objectMode&&(!i||!i.length))return;var o=n.push(i);if(!o){r=true;e.pause()}});for(var i in e){if(this[i]===undefined&&typeof e[i]==="function"){this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i)}}var o=["error","close","destroy","pause","resume"];z(o,function(t){e.on(t,n.emit.bind(n,t))});n._read=function(t){d("wrapped _read",t);if(r){r=false;e.resume()}};return n};m._fromList=I;function I(e,t){if(t.length===0)return null;var r;if(t.objectMode)r=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)r=t.buffer.join("");else if(t.buffer.length===1)r=t.buffer.head.data;else r=t.buffer.concat(t.length);t.buffer.clear()}else{r=q(e,t.buffer,t.decoder)}return r}function q(e,t,r){var n;if(e<t.head.data.length){n=t.head.data.slice(0,e);t.head.data=t.head.data.slice(e)}else if(e===t.head.data.length){n=t.shift()}else{n=r?D(e,t):N(e,t)}return n}function D(e,t){var r=t.head;var n=1;var i=r.data;e-=i.length;while(r=r.next){var o=r.data;var s=e>o.length?o.length:e;if(s===o.length)i+=o;else i+=o.slice(0,e);e-=s;if(e===0){if(s===o.length){++n;if(r.next)t.head=r.next;else t.head=t.tail=null}else{t.head=r;r.data=o.slice(s)}break}++n}t.length-=n;return i}function N(e,t){var r=c.allocUnsafe(e);var n=t.head;var i=1;n.data.copy(r);e-=n.data.length;while(n=n.next){var o=n.data;var s=e>o.length?o.length:e;o.copy(r,r.length-e,0,s);e-=s;if(e===0){if(s===o.length){++i;if(n.next)t.head=n.next;else t.head=t.tail=null}else{t.head=n;n.data=o.slice(s)}break}++i}t.length-=i;return r}function U(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!t.endEmitted){t.ended=true;n(P,t,e)}}function P(e,t){if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end")}}function z(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r)}}function F(e,t){for(var r=0,n=e.length;r<n;r++){if(e[r]===t)return r}return-1}}).call(this,e("_process"))},{"./_stream_duplex":32,"./internal/streams/BufferList":37,_process:7,buffer:4,"buffer-shims":11,"core-util-is":29,events:5,inherits:30,isarray:31,"process-nextick-args":25,"string_decoder/":39,util:3}],35:[function(e,t,r){"use strict";t.exports=a;var n=e("./_stream_duplex");var i=e("core-util-is");i.inherits=e("inherits");i.inherits(a,n);function o(e){this.afterTransform=function(t,r){return s(e,t,r)};this.needTransform=false;this.transforming=false;this.writecb=null;this.writechunk=null;this.writeencoding=null}function s(e,t,r){var n=e._transformState;n.transforming=false;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null;n.writecb=null;if(r!==null&&r!==undefined)e.push(r);i(t);var o=e._readableState;o.reading=false;if(o.needReadable||o.length<o.highWaterMark){e._read(o.highWaterMark)}}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e);this._transformState=new o(this);var t=this;this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.once("prefinish",function(){if(typeof this._flush==="function")this._flush(function(e,r){f(t,e,r)});else f(t)})}a.prototype.push=function(e,t){this._transformState.needTransform=false;return n.prototype.push.call(this,e,t)};a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};a.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r;n.writechunk=e;n.writeencoding=t;if(!n.transforming){var i=this._readableState;if(n.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark)}};a.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&t.writecb&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};function f(e,t,r){if(t)return e.emit("error",t);if(r!==null&&r!==undefined)e.push(r);var n=e._writableState;var i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}},{"./_stream_duplex":32,"core-util-is":29,inherits:30}],36:[function(e,t,r){(function(r){"use strict";t.exports=g;var n=e("process-nextick-args");var i=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:n;var o;g.WritableState=d;var s=e("core-util-is");s.inherits=e("inherits");var a={deprecate:e("util-deprecate")};var f;(function(){try{f=e("st"+"ream")}catch(e){}finally{if(!f)f=e("events").EventEmitter}})();var u=e("buffer").Buffer;var c=e("buffer-shims");s.inherits(g,f);function l(){}function h(e,t,r){this.chunk=e;this.encoding=t;this.callback=r;this.next=null}function d(t,r){o=o||e("./_stream_duplex");t=t||{};this.objectMode=!!t.objectMode;if(r instanceof o)this.objectMode=this.objectMode||!!t.writableObjectMode;var n=t.highWaterMark;var i=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:i;this.highWaterMark=~~this.highWaterMark;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;var s=t.decodeStrings===false;this.decodeStrings=!s;this.defaultEncoding=t.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){S(r,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new B(this)}d.prototype.getBuffer=function e(){var t=this.bufferedRequest;var r=[];while(t){r.push(t);t=t.next}return r};(function(){try{Object.defineProperty(d.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.")})}catch(e){}})();var p;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){p=Function.prototype[Symbol.hasInstance];Object.defineProperty(g,Symbol.hasInstance,{value:function(e){if(p.call(this,e))return true;return e&&e._writableState instanceof d}})}else{p=function(e){return e instanceof this}}function g(t){o=o||e("./_stream_duplex");if(!p.call(g,this)&&!(this instanceof o)){return new g(t)}this._writableState=new d(t,this);this.writable=true;if(t){if(typeof t.write==="function")this._write=t.write;if(typeof t.writev==="function")this._writev=t.writev}f.call(this)}g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function v(e,t){var r=new Error("write after end");e.emit("error",r);n(t,r)}function y(e,t,r,i){var o=true;var s=false;if(r===null){s=new TypeError("May not write null values to stream")}else if(typeof r!=="string"&&r!==undefined&&!t.objectMode){s=new TypeError("Invalid non-string/buffer chunk")}if(s){e.emit("error",s);n(i,s);o=false}return o}g.prototype.write=function(e,t,r){var n=this._writableState;var i=false;var o=u.isBuffer(e);if(typeof t==="function"){r=t;t=null}if(o)t="buffer";else if(!t)t=n.defaultEncoding;if(typeof r!=="function")r=l;if(n.ended)v(this,r);else if(o||y(this,n,e,r)){n.pendingcb++;i=b(this,n,o,e,t,r)}return i};g.prototype.cork=function(){var e=this._writableState;e.corked++};g.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest)A(this,e)}};g.prototype.setDefaultEncoding=function e(t){if(typeof t==="string")t=t.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t;return this};function m(e,t,r){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=c.from(t,r)}return t}function b(e,t,r,n,i,o){if(!r){n=m(t,n,i);if(u.isBuffer(n))i="buffer"}var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(!a)t.needDrain=true;if(t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest=new h(n,i,o);if(f){f.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{w(e,t,false,s,n,i,o)}return a}function w(e,t,r,n,i,o,s){t.writelen=n;t.writecb=s;t.writing=true;t.sync=true;if(r)e._writev(i,t.onwrite);else e._write(i,o,t.onwrite);t.sync=false}function _(e,t,r,i,o){--t.pendingcb;if(r)n(o,i);else o(i);e._writableState.errorEmitted=true;e.emit("error",i)}function E(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function S(e,t){var r=e._writableState;var n=r.sync;var o=r.writecb;E(r);if(t)_(e,r,n,t,o);else{var s=C(r);if(!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest){A(e,r)}if(n){i(k,e,r,s,o)}else{k(e,r,s,o)}}}function k(e,t,r,n){if(!r)x(e,t);t.pendingcb--;n();T(e,t)}function x(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function A(e,t){t.bufferProcessing=true;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount;var i=new Array(n);var o=t.corkedRequestsFree;o.entry=r;var s=0;while(r){i[s]=r;r=r.next;s+=1}w(e,t,true,t.length,i,"",o.finish);t.pendingcb++;t.lastBufferedRequest=null;if(o.next){t.corkedRequestsFree=o.next;o.next=null}else{t.corkedRequestsFree=new B(t)}}else{while(r){var a=r.chunk;var f=r.encoding;var u=r.callback;var c=t.objectMode?1:a.length;w(e,t,false,c,a,f,u);r=r.next;if(t.writing){break}}if(r===null)t.lastBufferedRequest=null}t.bufferedRequestCount=0;t.bufferedRequest=r;t.bufferProcessing=false}g.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};g.prototype._writev=null;g.prototype.end=function(e,t,r){var n=this._writableState;if(typeof e==="function"){r=e;e=null;t=null}else if(typeof t==="function"){r=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(n.corked){n.corked=1;this.uncork()}if(!n.ending&&!n.finished)L(this,n,r)};function C(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function R(e,t){if(!t.prefinished){t.prefinished=true;e.emit("prefinish")}}function T(e,t){var r=C(t);if(r){if(t.pendingcb===0){R(e,t);t.finished=true;e.emit("finish")}else{R(e,t)}}return r}function L(e,t,r){t.ending=true;T(e,t);if(r){if(t.finished)n(r);else e.once("finish",r)}t.ended=true;e.writable=false}function B(e){var t=this;this.next=null;this.entry=null;this.finish=function(r){var n=t.entry;t.entry=null;while(n){var i=n.callback;e.pendingcb--;i(r);n=n.next}if(e.corkedRequestsFree){e.corkedRequestsFree.next=t}else{e.corkedRequestsFree=t}}}}).call(this,e("_process"))},{"./_stream_duplex":32,_process:7,buffer:4,"buffer-shims":11,"core-util-is":29,events:5,inherits:30,"process-nextick-args":25,"util-deprecate":40}],37:[function(e,t,r){"use strict";var n=e("buffer").Buffer;var i=e("buffer-shims");t.exports=o;function o(){this.head=null;this.tail=null;this.length=0}o.prototype.push=function(e){var t={data:e,next:null};if(this.length>0)this.tail.next=t;else this.head=t;this.tail=t;++this.length};o.prototype.unshift=function(e){var t={data:e,next:this.head};if(this.length===0)this.tail=t;this.head=t;++this.length};o.prototype.shift=function(){if(this.length===0)return;var e=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return e};o.prototype.clear=function(){this.head=this.tail=null;this.length=0};o.prototype.join=function(e){if(this.length===0)return"";var t=this.head;var r=""+t.data;while(t=t.next){r+=e+t.data}return r};o.prototype.concat=function(e){if(this.length===0)return i.alloc(0);if(this.length===1)return this.head.data;var t=i.allocUnsafe(e>>>0);var r=this.head;var n=0;while(r){r.data.copy(t,n);n+=r.data.length;r=r.next}return t}},{buffer:4,"buffer-shims":11}],38:[function(e,t,r){(function(n){var i=function(){try{return e("st"+"ream")}catch(e){}}();r=t.exports=e("./lib/_stream_readable.js");r.Stream=i||r;r.Readable=r;r.Writable=e("./lib/_stream_writable.js");r.Duplex=e("./lib/_stream_duplex.js");r.Transform=e("./lib/_stream_transform.js");r.PassThrough=e("./lib/_stream_passthrough.js");if(!n.browser&&n.env.READABLE_STREAM==="disable"&&i){t.exports=i}}).call(this,e("_process"))},{"./lib/_stream_duplex.js":32,"./lib/_stream_passthrough.js":33,"./lib/_stream_readable.js":34,"./lib/_stream_transform.js":35,"./lib/_stream_writable.js":36,_process:7}],39:[function(e,t,r){var n=e("buffer").Buffer;var i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function o(e){if(e&&!i(e)){throw new Error("Unknown encoding: "+e)}}var s=r.StringDecoder=function(e){this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,"");o(e);switch(this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2;this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3;this.detectIncompleteChar=u;break;default:this.write=a;return}this.charBuffer=new n(6);this.charReceived=0;this.charLength=0};s.prototype.write=function(e){var t="";while(this.charLength){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;e.copy(this.charBuffer,this.charReceived,0,r);this.charReceived+=r;if(this.charReceived<this.charLength){return""}e=e.slice(r,e.length);t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize;t="";continue}this.charReceived=this.charLength=0;if(e.length===0){return t}break}this.detectIncompleteChar(e);var i=e.length;if(this.charLength){e.copy(this.charBuffer,0,e.length-this.charReceived,i);i-=this.charReceived}t+=e.toString(this.encoding,0,i);var i=t.length-1;var n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;this.charLength+=o;this.charReceived+=o;this.charBuffer.copy(this.charBuffer,o,0,o);e.copy(this.charBuffer,0,0,o);return t.substring(0,i)}return t};s.prototype.detectIncompleteChar=function(e){var t=e.length>=3?3:e.length;for(;t>0;t--){var r=e[e.length-t];if(t==1&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t};s.prototype.end=function(e){var t="";if(e&&e.length)t=this.write(e);if(this.charReceived){var r=this.charReceived;var n=this.charBuffer;var i=this.encoding;t+=n.slice(0,r).toString(i)}return t};function a(e){return e.toString(this.encoding)}function f(e){this.charReceived=e.length%2;this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3;this.charLength=this.charReceived?3:0}},{buffer:4}],40:[function(e,t,r){(function(e){t.exports=r;function r(e,t){if(n("noDeprecation")){return e}var r=false;function i(){if(!r){if(n("throwDeprecation")){throw new Error(t)}else if(n("traceDeprecation")){console.trace(t)}else{console.warn(t)}r=true}return e.apply(this,arguments)}return i}function n(t){try{if(!e.localStorage)return false}catch(e){return false}var r=e.localStorage[t];if(null==r)return false;return String(r).toLowerCase()==="true"}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],41:[function(e,t,r){t.exports=a;var n=e("simple-peer");var i=e("cuid");var o=e("inherits");var s=e("nanobus");o(a,s);function a(e,t){var r=this;if(!(r instanceof a))return new a(e,t);s.call(this);t=t||{};r._peers={};r._requests={};r.id=null;r.socket=e;e.on("connect",function(){e.emit("simple-signal[discover]",t)});if(e.connected){e.emit("simple-signal[discover]",t)}r.socket.on("simple-signal[discover]",r._onDiscover.bind(r));r.socket.on("simple-signal[offer]",r._onOffer.bind(r));r.socket.on("simple-signal[answer]",r._onAnswer.bind(r))}a.prototype._onDiscover=function(e){var t=this;t.id=e.id;t.emit("ready",e.metadata)};a.prototype._onOffer=function(e){var t=this;if(t._requests[e.trackingNumber]){if(t._peers[e.trackingNumber]){t._peers[e.trackingNumber].signal(e.signal)}else{t._requests[e.trackingNumber].push(e.signal)}return}t._requests[e.trackingNumber]=[e.signal];t.emit("request",{id:e.id,metadata:e.metadata||{},accept:function(r,i){r=r||{};i=i||{};r.initiator=false;var o=new n(r);o.id=e.id;o.metadata=e.metadata||{};t._peers[e.trackingNumber]=o;t.emit("peer",o);o.on("signal",function(r){t.socket.emit("simple-signal[answer]",{signal:r,trackingNumber:e.trackingNumber,target:e.id,metadata:i})});t._requests[e.trackingNumber].forEach(function(e){o.signal(e)});t._requests[e.trackingNumber]=[]}})};a.prototype._onAnswer=function(e){var t=this;var r=t._peers[e.trackingNumber];if(!r)return;if(r.id){r.id=e.id}else{r.id=e.id;r.metadata=e.metadata;t.emit("peer",r)}r.signal(e.signal)};a.prototype.connect=function(e,t,r){var o=this;t=t||{};r=r||{};t.initiator=true;var s=i();var a=new n(t);o._peers[s]=a;a.on("signal",function(t){o.socket.emit("simple-signal[offer]",{signal:t,trackingNumber:s,target:e,metadata:r})})};a.prototype.rediscover=function(e){var t=this;e=e||{};t.socket.emit("simple-signal[discover]",e)};a.SimplePeer=n},{cuid:12,inherits:19,
nanobus:22,"simple-peer":28}]},{},[41])(41)});
